/* Layer order declaration */
@layer root, fonts, reset, theming, base, utilities, animations;

@layer fonts {
	@font-face {
		font-family: 'Creepster';
		font-style: normal;
		font-weight: 400;
		src: url('/fonts/Creepster-Regular.ttf') format('truetype');
	}

	@font-face {
		font-family: 'Fira';
		font-style: normal;
		font-weight: 400;
		src: url('/fonts/FiraSans-Regular.ttf') format('truetype');
	}

	@font-face {
		font-family: 'Fira SemiBold';
		font-style: normal;
		font-weight: 400;
		src: url('/fonts/FiraSans-SemiBold.ttf') format('truetype');
	}

	@font-face {
		font-family: 'Fira Black';
		font-style: normal;
		font-weight: 400;
		src: url('/fonts/FiraSans-Black.ttf') format('truetype');
	}
}

@layer reset {
	@view-transition {
		navigation: auto;
	}

	* {
		scrollbar-color: var(--color-accent) var(--color-secondary);
	}
}

@layer theming {
	:root {
		/* colors */
		--color-primary: oklch(0.9542 0 0);
		--color-fade-primary: oklch(0.7974 0 0);
		--color-secondary: oklch(0.1988 0.0373 326.86);
		--color-accent: oklch(0.7002 0.1873 342.33);
		--color-lighter-accent: oklch(0.8675 0.0764 338.95);
		--color-success: oklch(0.6441 0.1752 146.88);
		--color-danger: oklch(0.5939 0.1995 20.68);
		--color-warning: oklch(0.8432 0.1722 84.73);
		--color-info: oklch(0.6619 0.1115 211.75);
		--color-light: oklch(0.9687 0.003 247.85);
		--color-dark: oklch(0.3477 0.013 248.2);
		--color-gray: oklch(0.5982 0 0);
		--color-white: oklch(1 0 0);
		--color-black: oklch(0 0 0);
	}
}

@layer root {
	:root {
		/* fonts */
		--font-regular: 'Fira', sans-serif;
		--font-semibold: 'Fira SemiBold', sans-serif;
		--font-bold: 'Fira Black', sans-serif;
		--font-title: 'Creepster', sans-serif;
		--radius: 5px;

		/* sizes */
		--base-size: 1.2rem;
		--scale: 1.2;
		--radius: 5px;
		--xxl: calc(var(--xl) * var(--scale) * var(--scale));
		--xl: calc(var(--h1) * var(--scale) * var(--scale));
		--lg: calc(var(--h1) * var(--scale));
		--h1: calc(var(--h2) * var(--scale));
		--h2: calc(var(--h3) * var(--scale));
		--h3: calc(var(--h4) * var(--scale));
		--h4: calc(var(--h5) * var(--scale));
		--h5: calc(var(--h6) * var(--scale));
		--h6: var(--base-size);
		--sm: calc(var(--base-size) / var(--scale));
		--xs: calc(var(--sm) / var(--scale));

		--timing: 1s;
	}
}

@layer base {
	html {
		height: 100%;
		position: relative;
		overflow-x: hidden;
	}

	body {
		background-color: hsl(0, 0%, 100%);
		color: var(--color-secondary);
		margin: 0;
		padding: 0;
		width: 100%;
		height: 100%;
		position: relative;
		overflow-x: hidden;
		overscroll-behavior: none;
		overflow-y: auto !important;
		-webkit-overflow-scrolling: touch;
		display: flex;
		flex-direction: column;
		line-height: 1.5;
		cursor: url('/icons/bat.svg'), auto;
		letter-spacing: 0px;
	}

	a {
		text-decoration: none;
		letter-spacing: 1px;
	}

	h1 {
		font-family: var(--font-title);
		font-size: clamp(var(--h4), 2vw, var(--h1));
		letter-spacing: -1px;
	}

	@supports (-webkit-touch-callout: none) {
		body,
		html {
			height: -webkit-fill-available;
		}
	}
}

@layer utilities {
	.indent {
		text-indent: 1rem;
	}

	.visually-hidden {
		position: absolute;
		clip: rect(0 0 0 0);
		clip-path: inset(50%);
		overflow: hidden;
		width: 1px;
		height: 1px;
		white-space: nowrap;
	}

	/* Enhanced focus indicators for better accessibility */
	*:focus-visible {
		outline: 2px solid var(--color-accent);
		outline-offset: 2px;
		border-radius: 2px;
	}

	/* Specific focus styles for interactive elements */
	button:focus-visible,
	a:focus-visible,
	input:focus-visible,
	textarea:focus-visible,
	select:focus-visible {
		outline: 3px solid var(--color-accent);
		outline-offset: 2px;
		box-shadow: 0 0 0 1px var(--color-white);
	}

	/* Focus styles for elements with aria-current */
	[aria-current='page'] {
		font-weight: bold;
		text-decoration: underline;
		text-decoration-color: var(--color-accent);
		text-underline-offset: 4px;
	}
}

@layer animations {
	@media (prefers-reduced-motion: no-preference) {
		html {
			scroll-behavior: smooth;
		}
	}

	@media (prefers-reduced-motion: reduce) {
		.product-card {
			transition: none !important;
		}

		.enlarged {
			animation: none !important;
		}

		.dropdown-content {
			animation: none !important;
		}

		.loading::after {
			animation: none !important;
			height: 4px;
			background: white;
		}

		::view-transition-group(*) {
			animation: none !important;
		}

		::view-transition-old(*) {
			animation: none !important;
			opacity: 0;
		}

		::view-transition-new(*) {
			animation: none !important;
			opacity: 1;
		}
	}
}
